<!--
  ~ Changes to this file committed after and not including commit-id: ccc0d2c5f9a5ac661e60e6eaf138de7889928b8b
  ~ are released under the following license:
  ~
  ~ This file is part of Hopsworks
  ~ Copyright (C) 2018, Logical Clocks AB. All rights reserved
  ~
  ~ Hopsworks is free software: you can redistribute it and/or modify it under the terms of
  ~ the GNU Affero General Public License as published by the Free Software Foundation,
  ~ either version 3 of the License, or (at your option) any later version.
  ~
  ~ Hopsworks is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY;
  ~ without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
  ~ PURPOSE.  See the GNU Affero General Public License for more details.
  ~
  ~ You should have received a copy of the GNU Affero General Public License along with this program.
  ~ If not, see <https://www.gnu.org/licenses/>.
  ~
  ~ Changes to this file committed before and including commit-id: ccc0d2c5f9a5ac661e60e6eaf138de7889928b8b
  ~ are released under the following license:
  ~
  ~ Copyright (C) 2013 - 2018, Logical Clocks AB and RISE SICS AB. All rights reserved
  ~
  ~ Permission is hereby granted, free of charge, to any person obtaining a copy of this
  ~ software and associated documentation files (the "Software"), to deal in the Software
  ~ without restriction, including without limitation the rights to use, copy, modify, merge,
  ~ publish, distribute, sublicense, and/or sell copies of the Software, and to permit
  ~ persons to whom the Software is furnished to do so, subject to the following conditions:
  ~
  ~ The above copyright notice and this permission notice shall be included in all copies or
  ~ substantial portions of the Software.
  ~
  ~ THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS  OR IMPLIED, INCLUDING
  ~ BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
  ~ NONINFRINGEMENT. IN NO EVENT SHALL  THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
  ~ DAMAGES OR  OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
  ~ OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
  -->

<aside class="offsidebar">
  <a id="show-sidebar" class="btn btn-sm btn-default"  title="Show"
     ng-click="projectCtrl.isClosed = !projectCtrl.isClosed">
    <i class="fa fa-2x fa-bars"></i>
  </a>
  <nav class="navbar navbar-inverse navbar-fixed-top" id="sidebar-wrapper" role="navigation" style="margin-top:50px;"  ng-cloak>
    <div>
    <ul class="nav sidebar-nav" ng-cloak ng-controller="ClusterUtilisationCtrl as clusterUtilCtrl">

      <li ng-show="projectCtrl.cloak" id="homeTab">
        <a href="#!/project/{{projectCtrl.currentProject.projectId}}">
          <!-- Audit  -->
          <img style="margin-right:5px" width="80" src="images/icons/home-24px.svg" id="jupyterTab"/>
          <div style="font-size: small; text-align: center;" class="ng-binding">Home</div>
        </a>
      </li>
      <hr/>
      <li ng-click="projectCtrl.goToJupyter()" ng-show="projectCtrl.showJupyter()">
        <a ng-class="{active: projectCtrl.activeService === 'jupyter'}">
          <i class="pull-right hopsworks-icon hopsworks-icon-jupyter" id="jupyterTab"/>
          <i uib-tooltip="Orange triangle: jobs are encountering problems. Red means Jobs cannot be run just now."
             tooltip-placement="auto right"
             ng-class="{'pull-left fa fa-ban text-danger': clusterUtilCtrl.YarnBan, 'pull-left fa fa-exclamation-triangle text-warning': clusterUtilCtrl.YarnWarn }" aria-hidden="true" style="margin-top: 3px"></i>
          Jupyter
        </a>
      </li>

      <li ng-click="projectCtrl.goToJobs()" ng-show="projectCtrl.showJobs()" id="jobsTab">
        <a ng-class="{active: projectCtrl.activeService === 'jobs' || projectCtrl.activeService === 'newjob'}">
          <i class="pull-right hopsworks-icon hopsworks-icon-gear"/>
          <i uib-tooltip="Orange triangle: jobs are encountering problems. Red means Jobs cannot be run just now."
             tooltip-placement="auto right"
             ng-class="{'pull-left fa fa-ban text-danger': clusterUtilCtrl.YarnBan, 'pull-left fa fa-exclamation-triangle text-warning': clusterUtilCtrl.YarnWarn }" aria-hidden="true" style="margin-top: 3px"></i>
          Jobs
        </a>
      </li>

      <li ng-click="projectCtrl.goToKafka()" ng-show="projectCtrl.showKafka()">
        <a ng-class="{active: projectCtrl.activeService === 'kafka'}">
          <i class="pull-right hopsworks-icon hopsworks-icon-kafka" id="kafkaTab"/>
          <i uib-tooltip="Orange triangle: Kafka is encountering problems. Red means Kafka is down."
             tooltip-placement="auto right"
             ng-class="{'pull-left fa fa-ban text-danger': clusterUtilCtrl.KafkaBan, 'pull-left fa fa-exclamation-triangle text-warning': clusterUtilCtrl.KafkaWarn }" aria-hidden="true" style="margin-top: 3px"></i>
          Kafka
        </a>
      </li>
      <li ng-click="projectCtrl.goToService('DELA')" ng-show="projectCtrl.showDela()">
        <a>
          <!-- Dela -->
          <img src="images/dela-green.png" style="width: 40px">
          <div style="font-size: small" class="ng-binding">Dela</div>
        </a>
      </li>

      <li ng-click="projectCtrl.goToRStudio()" ng-show="projectCtrl.showRStudio()">
        <a>
          <!-- RStudio -->
          <img src="images/rstudio.png" style="width: 40px">
          <div style="font-size: small" class="ng-binding">RStudio</div>
        </a>
      </li>

      <li ng-click="projectCtrl.goToFeaturestore()" ng-show="projectCtrl.showFeaturestore()" id="featurestoreTab">
        <a
                ng-class="{active: projectCtrl.activeService === 'featurestore' || projectCtrl.activeService === 'newfeaturegroup' || projectCtrl.activeService === 'newtrainingdataset' || projectCtrl.activeService === 'newstorageconnector'}">
          <i class="pull-right hopsworks-icon hopsworks-icon-database"/>
          Feature Store
        </a>
      </li>

      <li ng-click="projectCtrl.goToExperiments()" ng-show="projectCtrl.showExperiments()" id="experimentsTab">
        <a ng-class="{active: projectCtrl.activeService === 'experiments'}">
          <i class="pull-right hopsworks-icon hopsworks-icon-experiment"/>
          <i uib-tooltip="Experiments service is experiencing issues and is not working properly."
             tooltip-placement="auto right"
             ng-class="{'pull-left fa fa-ban text-danger': (clusterUtilCtrl.ElasticBan || clusterUtilCtrl.EpipeBan || clusterUtilCtrl.HdfsBan)}" aria-hidden="true" style="margin-top: 3px"></i>
          Experiments
        </a>
      </li>

      <li ng-click="projectCtrl.goToModels()" ng-show="projectCtrl.showModels()" id="modelsTab">
        <a ng-class="{active: projectCtrl.activeService === 'models'}">
          <i class="pull-right hopsworks-icon hopsworks-icon-model"/>
          <i uib-tooltip="Models service is experiencing issues and is not working properly."
             tooltip-placement="auto right"
             ng-class="{'pull-left fa fa-ban text-danger': (clusterUtilCtrl.ElasticBan || clusterUtilCtrl.EpipeBan || clusterUtilCtrl.HdfsBan)}" aria-hidden="true" style="margin-top: 3px"></i>
          Models
        </a>
      </li>

      <li ng-click="projectCtrl.goToServing()" ng-show="projectCtrl.showServing()" id="servingTab">
        <a ng-class="{active: projectCtrl.activeService === 'serving'}">
          <i class="pull-right hopsworks-icon hopsworks-icon-serving"/>
          Model Serving
        </a>
      </li>

      <li ng-click="projectCtrl.goToAirflow()" ng-show="projectCtrl.showAirflow()">
        <a ng-class="{active: projectCtrl.activeService === 'airflow'}">
          <i class="pull-right hopsworks-icon hopsworks-icon-airflow"/>
          Airflow
        </a>
      </li>
      <hr/>
      <li ng-click="projectCtrl.goToDatasets()" ng-show="projectCtrl.cloak" id="datasetsTab">
        <a ng-class="{active: projectCtrl.activeService === 'datasets'}">
          <i class="pull-right hopsworks-icon hopsworks-icon-folder"/>
          <i uib-tooltip="Orange triangle: the filesystem is encountering problems. Red means the filesystem is down."
             tooltip-placement="auto right"
           ng-class="{'pull-left fa fa-ban text-danger': clusterUtilCtrl.HdfsBan, 'pull-left fa fa-exclamation-triangle text-warning': clusterUtilCtrl.HdfsWarn }" aria-hidden="true" style="margin-top: 3px"></i>
          Data Sets
        </a>
      </li>
      <hr/>
      <li ng-click="projectCtrl.goToSettings()" ng-show="projectCtrl.cloak">
        <a ng-class="{active: projectCtrl.activeService === 'settings'}">
          <i class="pull-right hopsworks-icon hopsworks-icon-dashboard"/>
          Settings
        </a>
      </li>

      <li ng-click="projectCtrl.goToPython()" ng-show="projectCtrl.cloak" id="pythonTab">
        <a ng-class="{active: projectCtrl.activeService === 'python'}">
          <i class="pull-right hopsworks-icon hopsworks-icon-python"/>
          Python
        </a>
      </li>

      <li ng-click="projectCtrl.membersModal()" ng-show="projectCtrl.cloak">
        <a>
          <i class="pull-right hopsworks-icon hopsworks-icon-members"/>
          Members
        </a>
      </li>

      <li ng-click="projectCtrl.goToMetadataDesigner()" ng-show="projectCtrl.role === 'Data owner'"
          ng-show="projectCtrl.cloak" id="metadataTab" ng-if="mainCtrl.ShowMetadataDesigner">
        <a>
          <i class="sub_icon fa fa-2x fa-edit fa-lg pull-right" style="padding: 15px 10px;"></i>
          Metadata Designer
        </a>
      </li>
      <br>
      <hr/>
    </ul>
    </div>
  </nav>
</aside>

<!-- <tour class="ng-scope" step="projectCtrl.tourService.currentStep_TourTwo"
      post-tour="closeTour()"
      ng-if="projectCtrl.loadedView && projectCtrl.loadedProjectData && projectCtrl.tourService.showTips">
  <virtual-step
    ng-if="projectCtrl.tourService.activeTour === 'spark'"
    id="TourTwo"
    class="ng-scope"
    tourtip="Click Next, OR click on the Jobs tab to continue"
    tourtip-step="0"
    tourtip-element="#jobsTab"
    tourtip-placement="right"
    tourtip-next-label="Next"
    on-proceed="projectCtrl.goToJobs()"
    tourtip-offset-vertical="-18"
    tourtip-offset-horizontal="-13"
    ></virtual-step>
  <virtual-step
    ng-if="projectCtrl.tourService.activeTour === 'kafka'"
    id="TourTwo"
    class="ng-scope"
    tourtip="Click Next, OR click on the Kafka tab to continue"
    tourtip-step="0"
    tourtip-element="#kafkaTab"
    tourtip-placement="right"
    tourtip-next-label="Next"
    on-proceed="projectCtrl.goToKafka()"
    tourtip-offset-vertical="-15"
    ></virtual-step>
  <virtual-step
    ng-if="projectCtrl.tourService.activeTour === 'ml'"
    id="TourTwo"
    class="ng-scope"
    tourtip="Click Next to navigate to Jupyter and follow the Deep Learning tour!"
    tourtip-step="0"
    tourtip-element="#jupyterTab"
    tourtip-placement="right"
    tourtip-next-label="Next"
    on-proceed="projectCtrl.goToJupyter()"
    tourtip-offset-vertical="-18"
    tourtip-offset-horizontal="-13"
    ></virtual-step>
  <virtual-step
          ng-if="projectCtrl.tourService.activeTour === 'fs' && projectCtrl.tourService.currentStep_TourNine === -1"
          id="TourTwo"
          class="ng-scope"
          tourtip="Click Next to navigate to the Feature Store service and follow the Feature Store tour"
          tourtip-step="0"
          tourtip-element="#featurestoreTab"
          tourtip-placement="right"
          tourtip-next-label="Next"
          on-proceed="projectCtrl.goToFeaturestore()"
          tourtip-offset-vertical="-18"
          tourtip-offset-horizontal="-13"
  ></virtual-step>
</tour>

<tour class="ng-scope" step="projectCtrl.tourService.currentStep_TourNine"
      post-tour="closeTour()"
      ng-if="projectCtrl.loadedView && projectCtrl.loadedProjectData && projectCtrl.tourService.showTips">
  <virtual-step
          ng-if="projectCtrl.tourService.activeTour === 'fs'"
          id="TourTwo"
          class="ng-scope"
          tourtip="Features and feature groups are typically computed by jobs. In the 'Jobs' tab you can create and view jobs in your project."
          tourtip-step="10"
          tourtip-element="#jobsTab"
          tourtip-placement="right"
          tourtip-next-label="Next"
          on-proceed="projectCtrl.goToJobs()"
          tourtip-offset-vertical="-18"
          tourtip-offset-horizontal="-13"
  ></virtual-step>
</tour> -->
